@model WebApplication4.Models.MoviesViewModel

@{
    /**/

    ViewBag.Title = "Details";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@{
    var comments = (IEnumerable<WebApplication4.Models.CommentsMovies>)ViewBag.Comments;
    var ratingSum = ViewBag.RatingSum;
    var ratingCount = ViewBag.RatingCount;
    var CategoryN = (IEnumerable<WebApplication4.Models.Category>)ViewBag.CategoryName;
    var DirectorN = (IEnumerable<WebApplication4.Models.Director>)ViewBag.DirectorName;
    var MoviesRelated = (IEnumerable<WebApplication4.Models.Movie>)ViewBag.MovieRelated;
    decimal rating = 0;
    if (ratingCount > 0)
    {
        rating = (ratingSum / ratingCount);
    }
    var totalRating = decimal.Parse(rating.ToString());



}

<h2>Movie Details</h2>
<hr />

<div class="container">
    <div class="row center-block" style="border: 1px solid #ff9800;width:80%;padding-top:16px">
        <div class=" col-md-5">
            <section>
                <img class="img-rounded" style="height:440px;width:360px ; padding-bottom:8px" src="~/Image/@Model.Image" alt="Alternate Text" />
            </section>

        </div>
        <div class="col-md-7">
            <section>
                <span style="font-size:x-large;">Average Ratings: </span>
                @for (int i = 0; i < (int)totalRating; i++)
                {
                    <span class="starGlowN"></span>
                }
                @for (int i = (int)totalRating; i < 5; i++)
                {
                    <span class="starFadeN"></span>
                }
                <br />
                <span style="font-size:x-large">Film's Name:<b> @Html.DisplayFor(model => model.Name)</b> </span><br />
                <span style="font-size:x-large">Film's Price:<b> @Html.DisplayFor(model => model.Price)</b><b style="color:red"> $</b></span><br />
                <span style="font-size:x-large">
                    Director by:    @foreach (var DiN in DirectorN)
                    {
                        <b>@DiN.Name</b>
                    }
                </span><br />
                <span style="font-size:x-large">Film's Hint:<b> @Html.DisplayFor(model => model.Sight)</b> </span><br />
                <span style="font-size:x-large">
                    Film's Actors:<b>
                        <ul>
                            @foreach (var item in Model.Actors)
                            {

                                if (item.Checked)
                                {
                                    <li> <b>@Html.ActionLink(item.Name, "Details", "Actors", new { id = item.ID }, null)</b></li>
                                }

                            }
                        </ul>
                    </b>
                </span><br />
                <span style="font-size:x-large">Download Movie:<b>  @Html.ActionLink("OrderMovie", "OrderMovie", new { id = Model.ID })  </b><span style="color:green" class=" glyphicon  glyphicon-download"> </span></span><br />

            </section>
        </div>
        <hr />
    </div>
</div>
<hr />
@foreach (var c in comments)
{
    for (var i = 1; i <= c.Rating; i++)
    {
        <span class="starGlowN"></span>
    }
    for (var i = (c.Rating + 1); i <= 5; i++)
    {
        <span class="starFadeN"></span>
    }
    <br />
    <span style="font-size:large">Comment :<b>@Html.Raw(c.Comment.Replace("\n", "<br />"))</b> </span>
    <br />
    <span style="font-size:large">Comment by: <i><b>@c.UserName</b></i> , on :<i><b> @c.DateTime</b></i></span>
    <hr />

}



@*@foreach (var c in comments)
    {
        <hr />
        <div class="row">
            <div class="col-md-3">
                <i>@c.DateTime</i>
                <br />
                @for (var i = 1; i <= c.Rating; i++)
                {
                    <span class="starGlowN"></span>
                }
                @for (var i = (c.Rating + 1); i <= 5; i++)
                {
                    <span class="starFadeN"></span>
                }
            </div>
            <div class="col-md-9">
                @Html.Raw(c.Comment.Replace("\n", "<br />"))
            </div>

            <div class="col-md-9">comment by:@c.UserName</div>
        </div>
    }
    <hr />*@






@Html.Partial("_CommentBox")

<hr />
@if (ViewBag.ConnectionDataBase)
{
    <b style="font-size:xx-large;color:red;font-family:'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif"> Service-Customers Who Bought This Item Also Bought:</b>
    <hr />

    @*@*foreach (var subitem in MoviesRelated)
    {
        <div style="margin-left:8px" class="col-md-4 thumbnail ">
            <a href="../Details/@subitem.ID"><img style="height:280px;width:240px" src="~/Image/@subitem.Image" alt="Alternate Text" /></a>
            <a href="../Details/@subitem.ID"> <h3>Name Film: @subitem.Name</h3></a>
            <h4>Sight Film: @subitem.Sight $</h4>
            <h5>Director Film: @subitem.Director.Name</h5>

            <p><a class="btn btn-success" href="../Details/@subitem.ID">Learn more &raquo;</a></p>
        </div>

    }*@
    <div class="row" style="background-color:aliceblue; padding:10px 2px 2px 10px">
        @foreach (var subitem in MoviesRelated)
        {
            <div class="col-md-4 thumbnail " style="border: 1px solid #ff9800;width:300px;height:480px;margin-left:20px">
                <a href="../Movies/Details/@subitem.ID"><img class="img-rounded" style="height:280px;width:300px" src="~/Image/@subitem.Image" alt="Alternate Text" /></a>
                <a href="../Movies/Details/@subitem.ID"> <h3>Film's Name: @subitem.Name</h3></a>
                <h4>Film's price: @subitem.Price $</h4>
                <h5>Film's Director: @subitem.Director.Name</h5>

                <p><a class="btn btn-success" href="../Movies/Details/@subitem.ID">Learn more &raquo;</a></p>
            </div>

        }
    </div>


}

<link href="~/Content/Site.css" rel="stylesheet" />

